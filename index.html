import tkinter as tk
from tkinter import ttk, messagebox
import datetime
import time
import feedparser # Για τις ειδήσεις (RSS)
import vlc        # Για το Radio Stream

class AgendaApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Smart Agenda & Alarm v1.0")
        self.root.geometry("800x600")
        
        # --- Μεταβλητές ---
        self.news_index = 0
        self.news_list = self.get_news()

        # --- UI Στοιχεία ---
        self.create_widgets()
        self.update_clock()
        self.scroll_ticker()

    def create_widgets(self):
        # 1. Ημερομηνία και Ώρα
        self.lbl_clock = tk.Label(self.root, font=('Helvetica', 25, 'bold'), fg="blue")
        self.lbl_clock.pack(pady=10)

        # 2. Φόρμα Καταχώρησης Ραντεβού
        frame_entry = tk.LabelFrame(self.root, text="Νέο Ραντεβού", padx=10, pady=10)
        frame_entry.pack(fill="x", padx=20)

        tk.Label(frame_entry, text="Τίτλος:").grid(row=0, column=0)
        self.ent_title = tk.Entry(frame_entry)
        self.ent_title.grid(row=0, column=1)

        tk.Label(frame_entry, text="Ώρα (HH:MM):").grid(row=0, column=2)
        self.ent_time = tk.Entry(frame_entry)
        self.ent_time.grid(row=0, column=3)

        btn_add = tk.Button(frame_entry, text="Προσθήκη", command=self.add_appointment)
        btn_add.grid(row=0, column=4, padx=10)

        # 3. News Ticker (Κυλιόμενες Ειδήσεις)
        self.ticker_frame = tk.Frame(self.root, bg="black", height=30)
        self.ticker_frame.pack(side="bottom", fill="x")
        self.lbl_ticker = tk.Label(self.ticker_frame, text="", fg="white", bg="black", font=('Arial', 12))
        self.lbl_ticker.place(x=800, y=5)

    def get_news(self):
        # Παράδειγμα από RSS ελληνικού δικτύου (π.χ. ΕΡΤ ή ProtoThema)
        feed = feedparser.parse("https://www.protothema.gr/rss/general/")
        titles = [post.title for post in feed.entries]
        return " | ".join(titles)

    def update_clock(self):
        now = datetime.datetime.now().strftime("%d/%m/%Y %H:%M:%S")
        self.lbl_clock.config(text=now)
        self.root.after(1000, self.update_clock)

    def scroll_ticker(self):
        # Απλή λογική κυλιόμενου κειμένου
        current_text = self.news_list
        self.lbl_ticker.config(text=current_text)
        # Μετακίνηση (logic για το x coordinate)
        # ... (χρειάζεται animation loop)

    def add_appointment(self):
        # Εδώ θα προσθέτουμε το ραντεβού σε μια λίστα ή βάση δεδομένων
        title = self.ent_title.get()
        app_time = self.ent_time.get()
        messagebox.showinfo("Επιτυχία", f"Το ραντεβού '{title}' αποθηκεύτηκε!")

# Εκκίνηση
if __name__ == "__main__":
    root = tk.Tk()
    app = AgendaApp(root)
    root.mainloop()
